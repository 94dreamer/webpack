
# åˆå­¦æ•™ç¨‹3éƒ¨åˆ†- åŠ å…¥Reactçš„é¡¹ç›®æ­å»º

å­¦ä¹ Webpackçš„è¿‡ç¨‹å¯ä»¥ç”¨è¿™æ ·ä¸€å¥è¯æè¿°ï¼š
>å§‹äºBundleï¼Œé™·äºReactã€‚

è¯´è€å®è¯ï¼Œå¦‚æœä¸æ˜¯æ·±å…¥å­¦ä¹ Reactçš„åŸå› ï¼Œå¾ˆæœ‰æ—¶å€™æˆ‘ä»¬æ˜¯ä¸å¯èƒ½æœ‰æœºä¼šå¯¹Webpackè¿™ä¸€å½“å‰æœ€çƒ­é—¨çš„æ‰“åŒ…å·¥å…·æœ‰å¦‚æ­¤æ·±å…¥çš„å­¦ä¹ ï¼Œè¿™å¥è¯ä¸€æ–¹é¢åæ˜ äº†ReactæŠ€æœ¯æ ˆå¯¹Webpackçš„ä¾èµ–ï¼Œå¦å¤–ä¸€æ–¹é¢å¯ä»¥æµ‹è¯å‡ºReactçš„Webpackæ„å»ºçš„ç¡®ä¸æ˜¯é‚£ä¹ˆeasyğŸ™ˆã€‚ã€‚

æœ¬éƒ¨åˆ†ä¸‹é¢çš„é…ç½®æ–‡ä»¶å’Œnpmä¾èµ–å¯ä»¥ç›´æ¥ä½œç”¨åœ¨reacté¡¹ç›®ä¸­ï¼Œä½†æ˜¯æˆ‘æ›´å»ºè®®æˆ‘ä»¬ä¸€èµ·æ­å»ºå±äºè‡ªå·±çš„ä¸€ä¸ªReactçš„è„šæ‰‹æ¶ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¼šå¾ˆæœ‰è¶£ğŸ˜ï¼Œä¼šè®©æˆ‘ä»¬å¯¹webpackæœ‰æ›´æ·±å…¥ã€è¯¦ç»†çš„äº†è§£ã€‚

## å¿…è¦

1. ä½ å·²ç»çœ‹è¿‡äº†å‰é¢ä¸¤ä¸ªéƒ¨åˆ†ï¼Œç¡®è®¤è‡ªå·±å¯¹Webpackå’Œå¸¸ç”¨é…ç½®æœ‰ä¸€äº›åŸºæœ¬çš„äº†è§£ã€‚
2. Reacté¡¹ç›®çš„æ„å»º...å½“ç„¶éœ€è¦å¯¹Reactçš„é¡¹ç›®æ¶æ„æœ‰ä¸€äº›äº†è§£ï¼Œæ‰èƒ½çŸ¥é“éœ€è¦Webpackå¸®æˆ‘ä»¬åšä»€ä¹ˆã€‚

## ç›®å½•

* [ä½¿ç”¨create-react-appå¿«é€Ÿæ„å»º]()
* [ä¸ºReacté…ç½®Babel]() 
	* [Webpackçš„é…ç½®]() 
	* [Babelçš„é…ç½®]()
* [Rendering a React Application]()
* [Babel-Based Optimizations for React]()
* [Using react-lite Instead of React for Production]()
* [Exposing React Performance Utilities to Browser]()
* [Optimizing Rebundling Speed During Development]()
* [Code Splitting with React]()
* [Maintaining Components]()
* [Conclusion]()

## ä½¿ç”¨ create-react-app å¿«é€Ÿæ„å»º

[create-react-app](https://www.npmjs.com/package/create-react-app)å°è£…äº†å¾ˆå¤šæ„å»ºreactåº”ç”¨çš„æœ€ä½³å®è·µã€‚ä½ å¦‚æœæƒ³å¿«é€Ÿæ„å»ºå’Œä¸€ä¸ªç®€å•é…ç½®çš„å°é¡¹ç›®ï¼Œå®ƒæ˜¯éå¸¸å¥½ç”¨çš„ã€‚  

create-react-appä¸€ä¸ªæœ€å…·æœ‰å¸å¼•åŠ›çš„ç‰¹æ€§æ˜¯`ejecting`ã€‚å®ƒä¼šæ›¿ä»£æ‰åŸæœ¬çš„é¡¹ç›®ä¾èµ–ï¼Œè®©ä½ å¾—åˆ°ä¸€ä¸ªå®Œæ•´çš„webpacké…ç½®ã€‚  

æœ‰ä¸ªéœ€è¦æ³¨æ„çš„é—®é¢˜ï¼Œåœ¨ä½ `eject`ä¹‹åï¼Œä½ ä¸èƒ½è¿”å›åˆ°åŸºç¡€ä¾èµ–æ¨¡å¼ï¼Œä½ å°†ä¸å¾—ä¸ä¿æŒä½ è®¾ç½®çš„ç»“æœã€‚


## ä¸ºReacté…ç½®Babel

å…³äºåœ¨Webpackä¸­ä½¿ç”¨Babelçš„è¦é¢†ï¼Œè¿™é‡Œæœ‰ä¸€äº›å¾ˆæ˜ç¡®çš„Reactè®¾ç½®ã€‚

å¤§å¤šæ•°Reacté¡¹ç›®ä¾èµ–ä¸€ç§å«JSXçš„æ¨¡ç‰ˆæ ¼å¼ã€‚å®ƒæ˜¯JavaScriptçš„è¶…é›†ï¼Œå¯ä»¥è®©æˆ‘ä»¬æ··å…¥ç±»XMLè¯­æ³•ã€‚å¾ˆå¤šäººåœ¨ç”¨èµ·æ¥å¾ˆæ„Ÿè§‰éå¸¸çš„æ–¹ä¾¿ã€‚

ä¸€äº›Reactçš„å¼€å‘è€…ä½¿ç”¨ä¸€ä¸ªç§°ä¸ºFlowçš„è¯­è¨€æ¥æ‰©å±•æˆ‘ä»¬é™„ä¸Šä»£ç æ³¨é‡Šã€‚è¿™ç§æŠ€æœ¯å’ŒReactç»“åˆè‰¯å¥½ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸ä»…ä»…åªèƒ½ä½¿ç”¨å®ƒã€‚TypeScriptæ˜¯å¦ä¸€ä¸ªå¯è¡Œçš„æ›¿ä»£æ–¹æ¡ˆï¼Œå¯ä»¥å’ŒJSXåŒæ—¶å·¥ä½œã€‚

### Webpackçš„é…ç½®

Babelå…è®¸æˆ‘ä»¬å¾ˆå®¹æ˜“åœ°åœ¨Reactä¸­ä½¿ç”¨JSXã€‚æœ‰äº›äººå–œæ¬¢æŠŠä»–ä»¬ç”¨JSXä¹¦å†™çš„Reactç»„ä»¶ç”¨.jsxçš„åç¼€æ¥å‘½åã€‚Webpackå¯ä»¥æ ¹æ®æˆ‘ä»¬çš„æ„æ„¿ï¼ŒåŸºäºæˆ‘ä»¬çš„æ–‡ä»¶åæ¥è¿è¡Œä¸åŒçš„è¯­æ³•è§„åˆ™ã€‚

Webpackæä¾›äº†`resolve.extensions`çš„è®¾ç½®ï¼Œå¯ä»¥è®©æˆ‘ä»¬åšè¿™æ ·çš„äº‹æƒ…ã€‚å¦‚æœä½ æƒ³å…è®¸å¼•å…¥importä¸€ä¸ªButtonä»`â€˜./Buttonâ€™`ï¼Œè¿™ä¸ªæ–‡ä»¶çš„åå­—å«`Button.jsx`ï¼Œè®¾ç½®å¦‚ä¸‹ï¼š

`webpack.config.js`

```

const common = {
	...
	resolve:{
		extensions:['.js','.jsx'],
	},
};

```

loaderé…ç½®æ˜¯çº¿æ€§ä¾æ¬¡åŒ¹é…çš„ï¼Œè€Œä¸æ˜¯ä»…ä»…åŒ¹é…`/\.js$/`ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡`/\.(js|jsx)$/`æ¥å»¶ä¼¸åŒ¹é…åˆ°`.jsx`ã€‚

> åœ¨webpack 1 ä¸­ä½ å¿…é¡»ä½¿ç”¨ extensions:['','.js','.jsx'] æ¥åŒ¹é…æ‰©å±•çš„æ–‡ä»¶åã€‚åœ¨Webpack 2ä¸­è¿™ä¸æ˜¯å¿…éœ€çš„äº†ã€‚

### Babelçš„é…ç½®

æƒ³è¦Babelèƒ½è½¬è¯‘JSXï¼Œæˆ‘ä»¬éœ€è¦æ·»åŠ ä¸€ä¸ªé¢„è®¾presetã€‚å®‰è£…å®ƒï¼š

```
npm i babel-preset-react --save-dev

```

ä½ åŒæ—¶ä¹Ÿéœ€è¦è¿æ¥é¢„è®¾åˆ°Babelé…ç½®ï¼Œä¸‹é¢æ˜¯ç®€å•çš„è®¾ç½®å®ä¾‹ï¼š

#### .babelrc

```
{
	"presets":[
		[
			"es2015",{
				"modules":false
			}
		],
		"react"
	]
}
```

## æ¸²æŸ“ä¸€ä¸ªReactåº”ç”¨ç¨‹åº

ä¸ºäº†è®©ä¸€ä¸ªç®€å•çš„Reactåº”ç”¨è¿è¡Œèµ·æ¥ï¼Œä½ éœ€è¦æŠŠå®ƒè£…è½½åˆ°ä¸€ä¸ªDOMå…ƒç´ ã€‚`html-webpack-plugin`æ’ä»¶èƒ½å¤Ÿåœ¨è¿™é‡Œæ´¾ä¸Šç”¨åœºã€‚å®ƒå¯ä»¥ç»“åˆ`html-webpack-template`æˆ–è€…`html`




















